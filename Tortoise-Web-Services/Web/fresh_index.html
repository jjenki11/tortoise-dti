<!-- omg need a fresh start things got too cluttered -->

<!-- menu test... -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">

	<head>
		<title>jQuery Context Menu Plugin Demo</title>
		<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta charset="UTF-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">	    
    <link rel="stylesheet" type="text/css" media="screen" href="css/droppable_layout.css" />
    <link rel="stylesheet" type="text/css" media="screen" href="css/droppable_widget.js.css" />
    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
    <link href="js/vendor/jquery-ui-1.9.2/themes/base/minified/jquery-ui.min.css" rel="stylesheet" type="text/css">
    <link href="css/examples.css" rel="stylesheet" type="text/css">
    <link href="css/themes/jquery-ui-1.10.3.custom.css" rel="stylesheet" type="text/css">
    <script src="js/vendor/jquery-1.11.3.min.js"></script>
    <script src="js/vendor/jquery-ui-1.11.4.custom/jquery-ui.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script src="js/vendor/modernizr.custom.23937.js"></script>
    <script src="js/vendor/jquery-ui-1.11.4.custom/jquery-ui.js"></script>
    <script src="js/vendor/jquery-1.11.3.min.js"></script>
    <script src="js/SiteAPI.js"></script>
    <script src="js/TortoiseSceneGraph.js"></script>
    <script type="text/javascript" src="js/vendor/xtk.js"></script>
    <link href="css/plumber.css" rel="stylesheet">
    <script type="text/javascript" src="js/vendor/jquery-latest.js"></script>
    <script type="text/javascript" src="js/vendor/jquery-ui-latest.js"></script>
    <script type="text/javascript" src="js/vendor/jquery.layout-latest.js"></script>
    <script src="js/vendor/jquery.jsPlumb-1.4.1-all.js"></script>
    <script language="javascript" type="text/javascript" src="http://localhost:8444/socket.io/socket.io.js"></script>
    <script language="javascript" type="text/javascript" src="js/nodeconnection.js"></script>
    <script language="javascript" type="text/javascript" src="js/userHistory.js"></script>	
    <script src="js/vendor/modernizr.custom.23937.js"></script>
    <script language="javascript" type="text/javascript" src="js/vendor/jquery-dialogextend-master/build/jquery.dialogextend.js"></script>
    <script language="javascript" type="text/javascript" src="js/userProfile.js"></script>
    <script language="javascript" type="text/javascript" src="js/signInDialog.js"></script>
    <script type="text/javascript" src="js/vendor/jquery.layout-latest.js"></script>
    <script language="javascript" type="text/javascript" src="js/vendor/flot/jquery.flot.js"></script>
    <script language="javascript" type="text/javascript" src="js/vendor/flot/jquery.flot.time.js"></script>
    <script language="javascript" type="text/javascript" src="js/vendor/flot/jquery.flot.selection.js"></script>
    <script language="javascript" type="text/javascript" src="js/vendor/flot/jquery.flot.symbol.js"></script>	
    <script language="javascript" type="text/javascript" src="js/mathPack.js"></script>	
    <script language="javascript" type="text/javascript" src="js/MathPack2.js"></script>	
    <script language="javascript" type="text/javascript" src="js/imageTools.js"></script>	
    <script language="javascript" type="text/javascript" src="js/pluginHandler.js"></script>	
    <script language="javascript" type="text/javascript" src="js/HashTable.js"></script>
    <script language="javascript" type="text/javascript" src="js/SensoryManager.js"></script>    
    <script language="javascript" type="text/javascript" src="http://localhost:8444/socket.io/socket.io.js"></script>
    <script language="javascript" type="text/javascript" src="js/nodeconnection.js"></script>	
    <script language="javascript" type="text/javascript" src="js/userHistory.js"></script>
    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
    <script src="http://code.jquery.com/jquery-latest.min.js" type="text/javascript"></script>

<!-- 3 D WINDOW STUFF -->
    <script language="javascript" type="text/javascript" src="js/vendor/pre3djs/pre3d.js"></script>
    <script language="javascript" type="text/javascript" src="js/vendor/pre3djs/pre3d_path_utils.js"></script>
    <script language="javascript" type="text/javascript" src="js/vendor/pre3djs/pre3d_shape_utils.js"></script>
    <script language="javascript" type="text/javascript" src="js/vendor/pre3djs/demos/colorscube.js"></script>
    <script language="javascript" type="text/javascript" src="js/vendor/pre3djs/demos/demo_utils.js"></script>	  
    
    
    <link rel="stylesheet" type="text/css" href="js/papaya/Papaya-master/build/papaya.css?version=0.8&build=884" />
    	<script type="text/javascript" src="js/papaya/Papaya-master/build/papaya.js?version=0.8&build=884"></script>
		<style type="text/css">
			BODY,
			HTML {
				padding: 0px;
				margin: 0px;
			}
			BODY {
				font-family: Verdana, Arial, Helvetica, sans-serif;
				font-size: 11px;
				background: #FFF;
				padding: 15px;
			}

			H1 {
				font-family: Georgia, serif;
				font-size: 20px;
				font-weight: normal;
			}

			H2 {
				font-family: Georgia, serif;
				font-size: 16px;
				font-weight: normal;
				margin: 0px 0px 10px 0px;
			}

			#myDiv {
				width: 150px;
				border: solid 1px #2AA7DE;
				background: #6CC8EF;
				text-align: center;
				padding: 4em .5em;
				margin: 1em;
				float: left;
			}

			#myList {
				margin: 1em;
				float: left;
			}

			#myList UL {
				padding: 0px;
				margin: 0em 1em;
			}

			#myList LI {
				width: 100px;
				border: solid 1px #2AA7DE;
				background: #6CC8EF;
				padding: 5px 5px;
				margin: 2px 0px;
				list-style: none;
			}

			#options {
				clear: left;
			}

			#options INPUT {
				font-family: Verdana, Arial, Helvetica, sans-serif;
				font-size: 11px;
				width: 150px;
			}

		</style>

		<script src="js/vendor/jquery-1.4.2.min.js" type="text/javascript"></script>
		<script src="js/vendor/jquery.contextMenu.js" type="text/javascript"></script>
		<link href="js/vendor/css/contextMenu.css" rel="stylesheet" type="text/css" />
		
		<script type="text/javascript">
var outerLayout;

var params = [];

	var extendDialog = function(dialog) {
        dialog.dialogExtend({
            "maximizable" : true,
            "minimizable" : true,
            "collapsable" : true,
            "closable" : true,
            "dblclick" : "maximize"
        });
        return dialog;
    };
    var state = false;
    //	To show a dialog
    var showDialog = function(theDialog, methodName, size, abctitle){
        var method = methodName || 'open';
        var ttl = abctitle || 'Image Dialog';
       // console.log('SIZE OF IMAGE: ',size.w, size.h);
        extendDialog($( "#dialog" ).dialog({
            		closeOnEscape:false,
            		title: 'Image Dialog',
            		position: {
               			my: "left top",
               			at: "left top",
               			of: $("#centerContent").parent(".ui-dialog")
           			},
           			width:  (size!=null) ? size.w : "auto",
           			height: (size!=null) ? size.h : "auto"
        		}));
        theDialog.dialog(method);        
    }; 

			$(document).ready( function() {
						
				// Show menu when #myDiv is clicked
				$("#myDiv").contextMenu({
					menu: 'myMenu'
				},
					function(action, el, pos) {
					    
					    switch(action)
					    {
					        case 'delete': 
					            console.log(action+" pressed");
					            break;
					        case 'edit':
					            console.log(action+" pressed");
					            break;
					        case 'quit':
					            console.log(action+" pressed");
					            break;
					        case 'copy':
					            console.log(action+" pressed");
					            break;
					        case 'paste':
					            console.log(action+" pressed");
					            break;
					        case 'cut':
					            console.log(action+" pressed");
					            break;
					        default :
					            console.log("something else was pressed...");					    
					    }
				});

				// Show menu when a list item is clicked
				$("#myList UL LI").contextMenu({
					menu: 'myMenu'
				}, function(action, el, pos) {
				        switch(action)
					    {
					        case 'delete': 
					            console.log(action+" pressed");
					            $("#hideme").hide();
					            break;
					        case 'edit':
					            console.log(action+" pressed");
					            $("#hideme").show();
					            break;
					        case 'quit':
					            console.log(action+" pressed");
					            break;
					        case 'copy':
					            console.log(action+" pressed");
					            break;
					        case 'paste':
					            console.log(action+" pressed");
					            break;
					        case 'cut':
					            console.log(action+" pressed");
					            break;
					        default :
					            console.log("something else was pressed...");					    
					    }
					    /*
					alert(
						'Action: ' + action + '\n\n' +
						'Element text: ' + $(el).text() + '\n\n' +
						'X: ' + pos.x + '  Y: ' + pos.y + ' (relative to element)\n\n' +
						'X: ' + pos.docX + '  Y: ' + pos.docY+ ' (relative to document)'
						);
						*/
				});

				// Disable menus
				$("#disableMenus").click( function() {
					$('#myDiv, #myList UL LI').disableContextMenu();
					$(this).attr('disabled', true);
					$("#enableMenus").attr('disabled', false);
				});

				// Enable menus
				$("#enableMenus").click( function() {
					$('#myDiv, #myList UL LI').enableContextMenu();
					$(this).attr('disabled', true);
					$("#disableMenus").attr('disabled', false);
				});

				// Disable cut/copy
				$("#disableItems").click( function() {
					$('#myMenu').disableContextMenuItems('#cut,#copy');
					$(this).attr('disabled', true);
					$("#enableItems").attr('disabled', false);
				});

				// Enable cut/copy
				$("#enableItems").click( function() {
					$('#myMenu').enableContextMenuItems('#cut,#copy');
					$(this).attr('disabled', true);
					$("#disableItems").attr('disabled', false);
				});
				
				$("#toggleMRI").click( function() {
				    state = !state;
				    if(state)
				    {
				        $("#hideme").show();    
				    }
				    else
				    {
				        $("#hideme").hide();
				    }
				
				}); 

            
       			      var api = new SiteAPI();          
            
                $("#ThreeDWin").hide();
                $("#hideme").hide();
                $("#prog_row").hide();
                $("#col2").append(api.fullViewer());                    
                    $("#col3").append(api.embeddedViewer());
      var omg = api.init();            
		//outerLayout = $("body").layout();
		var tools = new imageTools();
		var plugins = new pluginHandler();			
		var math = new mathPack();                   
                setTimeout(function(){
                    document.title = omg;
                    $("#col1").append(api.setupWizard("#plumber"));
                    $("#col2").append(api.fullViewer());                    
                    $("#col3").append(api.embeddedViewer());
                }, 100);
                
            jsPlumb.ready(function() {    
                  var a = $("#source");
                  var b = $("#target");          
                  var c = $("#sink");
                  
                  var endpointOptions = { 
                      isSource:true, 
                      isTarget:true,
                      isContentEditable:true,
                      endpoint: [ "Dot", {radius:10} ],
                      style:{ fillStyle:'blue' },
                      maxConnections:-1,
                      connector : "Straight",
                      connectorStyle: { lineWidth:7, strokeStyle:'blue' },
                      scope:"blueline",
                      dropOptions:{ 
                            drop:function(e, ui) { 
                              alert('drop!'); 
                              console.log(e);
                              console.log(ui);
                            } 
                        }  
                  };
                 
                 
                 jsPlumb.addEndpoint("source", {uuid: "srcPt" }, endpointOptions);
                 jsPlumb.addEndpoint("target", {uuid: "tgtPt" }, endpointOptions);
                 jsPlumb.addEndpoint("sink", {uuid: "snkPt" }, endpointOptions);
                 
                 var c2 = jsPlumb.connect({uuids:["srcPt", "tgtPt", "snkPt"]});

                  var stateMachineConnector = {
                      connector:"StateMachine",
                      paintStyle:{lineWidth:3,strokeStyle:"#056"},
                      hoverPaintStyle:{strokeStyle:"#dbe300"},
                      endpoint:"Blank",
                      anchor:"Continuous",
                      overlays:[ ["PlainArrow", {location:1, width:15, length:12} ]]
                  };
                  
                  var connection = jsPlumb.connect({
                    source:"source",
                    target:"target",
                    sink:"sink",
                    overlays:[
                      [ "Label", {
                        events:{
                          click:function(labelOverlay, originalEvent) { 
                            console.log("click on label overlay for :" + labelOverlay.component); 
                          }
                        }
                      }],
                      [ "Arrow", {
                        events:{
                          dblclick:function(diamondOverlay, originalEvent) { 
                            console.log("double click on diamond overlay for : ", (diamondOverlay.component)); 
                          }
                        }
                      }]    
                    ]
                  });   
                  
                  jsPlumb.connect({source: "source",target: "sink"});
                  
                  connection.source.bind("mouseup", function(conn) {
                      console.log("you clicked on source: ", this.id);
                      console.log($("#"+this.id).text());
                      $("#"+this.id).text("mr source");
                  });
                  connection.target.bind("mouseup", function(conn) {
                      console.log("you clicked on target: ", this.id);
                      console.log($("#"+this.id).text());
                      $("#"+this.id).text("mr target");
                  });  
                     
                  c.bind("mouseup", function(conn) {
                      console.log("you clicked on sink: ", this.id);
                      console.log($("#"+this.id).text());
                      $("#"+this.id).text("mr sink");
                  });    
                  jsPlumb.repaint('plumber');    
                  jsPlumb.draggable($(".plumber"));                          
                });

		
			});
			

                
                /*
		var sock = new nodeConnection();		
		sock.init(plugins);	
		*/
		</script>
	</head>

	<body>
  <!-- MIDDLE PANE -->
  <div class="ui-layout-center">
      
	  <ul id="column1" class="column">		
		  <div id="centerContent">
        <div class="container">
          <nav class="navbar navbar-inverse">
            <div class="container-fluid">
              <div class="navbar-header">
                <a class="navbar-brand" href="#">Tortoise DTI</a>
              </div>
              <div>
                <ul class="nav navbar-nav">
                  <li class="active"><a href="#">Home</a></li>
                  <li class="dropdown">
                    <a class="dropdown-toggle" data-toggle="dropdown" href="#">Page 1
                    <span class="caret"></span></a>
                    <ul class="dropdown-menu">
                      <li><a href="#">Page 1-1</a></li>
                      <li><a href="#">Page 1-2</a></li>
                      <li><a href="#">Page 1-3</a></li> 
                    </ul>
                  </li>
                  <li><a href="#">Page 2</a></li> 
                  <li><a href="#">Page 3</a></li> 
                </ul>
                <ul class="nav navbar-nav navbar-right">
                  <li><a href="#"><span class="glyphicon glyphicon-user"></span> Sign Up</a></li>
                  <li><a href="#"><span class="glyphicon glyphicon-log-in"></span> Login</a></li>
                </ul>
              </div>
            </div>
          </nav>
          <div class="jumbotron">
            <h1>NICHD STBB DTI Config and Visualization</h1>
            <p>Set up analysis and run automated scripts then view result in many viewing modalities</p> 
          </div>
    
          <div class="row">
            <div class="col-sm-4" id="col1">
              <h3>Set up Analysis</h3>
              <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit...</p>
              <p>Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris...</p>
              
            </div>
            <div class="col-sm-4" id="col2">
              <h3>View fullscreen single DTI</h3>
              <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit...</p>
              <p>Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris...</p>
            </div>
            <div class="col-sm-4" id="col3">
              <h3>View embedded (multi) DTI</h3>        
              <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit...</p>
              <p>Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris...</p>
            </div>
          </div>
          
    
          <div class="row" id="prog_row">
            <div id="prog_bar" class="progress">
              <div class="progress-bar" role="progressbar" aria-valuenow="70"
              aria-valuemin="0" aria-valuemax="100" style="width:70%">
                <span class="sr-only">70% Complete</span>
              </div>
            </div>
          </div>
          
          <div class="row">
            <div id="plumber" style="width: 700px;height: 500px;border: solid 1px;" class="agent-wrapper" hidden="false">
            	  <div id="plumber" style="width: 700px;height: 500px;border: solid 1px;" class="agent-wrapper">
	                <button type="button" onclick="hideCon();">Hide connections</button>
                    <button type="button" onclick="showCon()">Show connections</button>
                    <button type="button" onclick="changeLayout()">Reset Layout</button>
                    <div id="source" class="source plumber" style="width: 100px;height: 100px;border: solid 1px;">Source</div>
                    <div id="target" class="target plumber" style="width: 100px;height: 100px;border: solid 1px;">Target</div>   
                    <div id="sink" class="sink plumber" style="width: 100px;height: 100px; border: solid 1px;">SINK</div>
                  </div>  
            </div>
          </div>
        <div class="row" id="hideme">
           <!-- <canvas id="ThreeDWin" width="950" height="750" visible="false"></canvas>  -->
            <div class="papaya" id="papi"  width="950" height="750" data-params="params"></div>
        </div>
        
        <div class="row">
		    <h1>jQuery Context Menu Plugin Demo</h1>
		    <p>
			    This plugin lets you add context menu functionality to your web applications.
		    </p>

		    <h2>Demo</h2>

		    <div id="myDiv">
			    Right click to view the context menu
		    </div>

		    <div id="myList">
			    <ul>
				    <li>Item 1</li>
				    <li>Item 2</li>
				    <li>Item 3</li>
				    <li>Item 4</li>
				    <li>Item 5</li>
				    <li>Item 6</li>
			    </ul>
		    </div>

		    <div id="options">
			    <p>
				    <input type="button" id="disableItems" value="Disable Cut/Copy" />
				    <input type="button" id="enableItems" value="Enable Cut/Copy" disabled="disabled" />
			    </p>
			    <p>
				    <input type="button" id="disableMenus" value="Disable Context Menus" />
				    <input type="button" id="enableMenus" value="Enable Context Menus" disabled="disabled" />
				    <input type="button" id="toggleMRI" value="Toggle MRI Viewer" />
			    </p>
		    </div>

		    <ul id="myMenu" class="contextMenu">
			    <li class="edit"><a href="#edit">Edit</a></li>
			    <li class="cut separator"><a href="#cut">Cut</a></li>
			    <li class="copy"><a href="#copy">Copy</a></li>
			    <li class="paste"><a href="#paste">Paste</a></li>
			    <li class="delete"><a href="#delete">Delete</a></li>
			    <li class="quit separator"><a href="#quit">Quit</a></li>
		    </ul>
        </div>
          
        </div>   
    </div>
	  </div>		
  </div>



    <!-- Pane draggable content -->
    <div id="dialog"></div>

    

	</body>
</html>
